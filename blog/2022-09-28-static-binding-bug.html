<!DOCTYPE html>
<html>
<head>
    <title>Grails Data Binding to Static Properties Bug</title>
    <meta name="keywords" content="grails,jvm,framework,groovy,gradle,spring-boot,gorm" />
    <meta name="description" content="Information about an issue in the Grails data binding logic that can cause modification of static properties" />
    <meta name="date" content="September 28, 2022" />
    <meta name="robots" content="all"/>
    <link rel="alternate" type="application/rss+xml" title="RSS" href="https://grails.org/rss.xml" />
    <meta charset='UTF-8' />
    <link rel='icon' href='https://grails.org/images/favicon.ico'/>
    <meta name='twitter:card' content='summary_large_image'/>
    <meta name='twitter:site' content='@grailsframework'/>
    <meta name='twitter:description' content='Information about an issue in the Grails data binding logic that can cause modification of static properties'/>
    <meta name='twitter:creator' content='@grailsframework'/>
    <meta property='og:image' content='https://grails.org/images/grails.png'/>
    <meta property='og:image:width' content='300'/>
    <meta property='og:image:height' content='300'/>
    <meta property='og:url' content='https://grails.org'/>
    <meta property='og:title' content='Grails Data Binding to Static Properties Bug'/>
    <meta property='og:description' content='Information about an issue in the Grails data binding logic that can cause modification of static properties'/>
    <meta property='og:type' content='website'/>

    <meta name='viewport' content='width=device-width, initial-scale=1' />
    <link rel='mask-icon' href='https://grails.org/images/grails-pinned-icon.svg' color='feb672' />
    <link rel='stylesheet' href='https://grails.org/stylesheets/screen.css' />
    <script src='https://grails.org/javascripts/navigation.js'></script>
    
    
    
</head>
<body><header class='mainheader'>
    <div class='content'>
        <a href='https://grails.org/index.html'><img class='grailslogo' src='https://grails.org/images/grails_logo.svg' alt='Grails Logo' /></a>
        <a href='javascript:show(&apos;topmenus&apos;, &apos;showNavigationLink&apos;)' id='showNavigationLink' class='mobile align-center'>Show Navigation</a>
        <div id='topmenus'>
            <nav class='secondarymenu' id='secondarymenu'><ul>
                <li><a href='https://grails.org/casestudies/index.html'>Case Studies</a></li>
                <li><a href='https://grails.org/blog/index.html'>Blog</a></li>
                <li><a href='https://grails.org/learning.html'>Learning</a></li>
                <li><a href='https://grails.org/community.html'>Community</a></li>
                <li><a href='https://grails.org/search.html'>Search</a></li>
            </ul></nav>
            <nav class='mainmenu' id='mainmenu'><ul>
                <li><a href='https://grails.org/documentation.html'>Documentation</a></li>
                <li><a href='https://grails.org/download.html'>Download</a></li>
                <li><a href='https://grails.org/plugins.html'>Plugins</a></li>
                <li><a href='https://guides.grails.org/index.html'>Guides</a></li>
                <li><a href='https://grails.org/foundation/index.html'>Foundation</a></li>
                <li><a href='https://grails.org/faq.html'>FAQ</a></li>
                <li><a href='https://grails.org/support.html'>Support</a></li>
            </ul></nav>
        </div>
    </div>
</header>
<article><div class='headerbar chalicesbg'>
  <div class='content'>
    <h1>
      <a href='https://grails.org/blog/index.html'>Grails Blog</a>
    </h1>
  </div>
</div>
<div class='content container'>
  <div class='light padded blogpost'><h1>Grails Data Binding to Static Properties Bug</h1>
<p><span class="author">By Matthew Moss</span></p>
<p><span class="date">September 28, 2022</span></p>
<p><strong>Information about an issue in the Grails data binding logic that can cause modification of static properties</strong></p>
<h2>Summary</h2>
<p>The Grails Team has confirmed a bug that was found in the Grails data binding logic, which incorrectly permits data binding to static properties under certain conditions. This bug was identified and reported by the Engineering Team at Transitional Data Services (<a href="https://tdsi.com">https://tdsi.com</a>).</p>
<h2>Description</h2>
<p>Data binding to static properties is not intended behavior. However, because of this bug, a static property of the target object's class may be modified if:</p>
<ul>
<li>The data binding source contains a property of the same name as the static property</li>
<li>The static property's declared type is <strong>Object</strong> (or the type is undeclared, which is the same as declaring as <strong>Object</strong>)</li>
<li>The static property is not final</li>
</ul>
<p>This can occur when manually calling <strong>bindData</strong> (or one of several variants) given the conditions above. Under particular additional conditions, controller actions that automatically bind request data to (nested) command objects may cause static properties to change.</p>
<h2>The constraints property</h2>
<p>One common property that represents an important part of the functionality in the Grails framework is the <strong>constraints</strong> property. The <strong>constraints</strong> property allows classes that implement the <strong>Validateable</strong> trait to check that the data in an instance of the class is valid. It is also a static property that could be overwritten due to this bug, potentially leading to data corruption.   Because of this possibility, we feel it is important for organizations using the Framework to be aware of this bug and its resolutions.</p>
<p>For more information about data validation functionality available in the Grails framework, please see the <a href="https://docs.grails.org/5.2.4/guide/validation.html">documentation</a>.</p>
<h2>Resolution</h2>
<p>The Grails Team recommends that all Grails applications be upgraded to a patched Grails release. Grails 4.x applications can be upgraded to version 4.1.2 or higher, and Grails 5.x applications can be upgraded to 5.2.3 or higher.</p>
<p>We have released a patched version of Grails 3 for this bug.  Grails 3.x applications can be upgraded to version 3.3.16.</p>
<p>Please note that versions 1, 2, and 3 of the Grails framework <a href="https://grails.org/support-schedule.html">have reached end of support</a>.  We strongly recommend that applications built with these versions be upgraded to an actively maintained version of the Framework. Additionally, the <a href="https://grails.org/foundation/">Grails Foundation</a> provides <a href="https://grails.org/support.html">Commercial Support options</a> for Grails framework versions 3, 4, and 5.  To learn more about how Commercial Support can benefit your organization, please <a href="mailto:info@grails.org">contact us</a>.</p>
<p>If you are unable to upgrade to a patched version of the Framework, you can make a couple of minor adjustments to work around the issue.</p>
<p>First, if your application makes explicit calls to <strong>bindData</strong>, those calls should be reviewed and adjusted to avoid binding to static properties of the target instance's class.</p>
<p>Second, you can prevent data binding to static properties by marking them as <strong>final</strong>. For example:</p>
<pre><code class="language-groovy">class RecordValueCommand implements Validateable {
    int value
    static constraints = { value min: 0 }
}
</code></pre>
<p>Because <strong>constraints</strong> is not <strong>final</strong> and has no declared type, it is susceptible to this data binding bug. The workaround is to add the <strong>final</strong> modifier.</p>
<pre><code class="language-groovy">static final constraints = { value min: 0 }
</code></pre>
<p>In situations where the <strong>final</strong> modifier cannot be added, the type of the property should be declared explicitly (not <strong>Object</strong>) and the static property will resist type-changing modifications.</p>
<pre><code class="language-groovy">static Closure constraints = { value min: 0 }
</code></pre>
<h2>Thank you!</h2>
<p>We would like to thank the Engineering Team at Transitional Data Services for identifying this bug as well as the countless contributions from the folks in  our awesome community.  Without your dedication and enthusiasm, the Grails framework would not be where it is today.  Thank you!</p>
<p>For more technical details about this bug and the patches, please see the <a href="https://github.com/grails/grails-core/issues/12718">discussion on GitHub</a>.</p>
    <h2 class='space-above'>
      <span>You might also like ...</span>
    </h2>
    <div class='threecolumns'>
      <div class='column'><article class='blogcard' style='background-image: url(https://grails.org/images/grails-blog-index-3.png)'>
  <a href='https://grails.org/blog/2023-07-25-introducing-grails-6.html'>
    <h3>July 25, 2023</h3>
    <h2>"Introducing Grails 6: Embracing Modern Java,...</h2>
  </a>
</article></div>
      <div class='column'><article class='blogcard' style='background-image: url(https://grails.org/images/grails-blog-index-3.png)'>
  <a href='https://grails.org/blog/2023-05-27-grails-6-rc1.html'>
    <h3>May 27, 2023</h3>
    <h2>Grails 6 RC1 - Release Announcement</h2>
  </a>
</article></div>
      <div class='column'><article class='blogcard' style='background-image: url(https://grails.org/images/grails-blog-index-3.png)'>
  <a href='https://grails.org/blog/2023-03-29-grails-6-m2.html'>
    <h3>March 29, 2023</h3>
    <h2>Grails 6 M2 - Release Annoucement</h2>
  </a>
</article></div>
    </div>
  </div>
</div>&nbsp;</article>
<footer>
    <div class='content'>
        <div class='ocihometograils'>
            <a href='https://grails.org/foundation/index.html'><img class='' src='https://grails.org/images/foundation-logo-horizontal-orange.svg' alt='Grails Foundation' width='300px' /></a>
            <span style="margin-top:22px;">&copy; 2023 Grails Foundation. All rights reserved.</span>
        </div>
        <nav class='socialmedianav'>
            <ul>
                <li>
                    <a href='mailto:info@grails.org'><img class='' src='https://grails.org/images/email.svg' alt='Email Icon' /></a>
                </li>
                <li>
                    <a href='https://slack.grails.org'><img class='' src='https://grails.org/images/slack.svg' alt='Slack Icon' /></a>
                </li>
                <li>
                    <a href='https://www.youtube.com/watch?v=XnRNfDGkBVg&amp;list=PLI74De5M9T73uH3WilDCePP2qfSDpMaGu'><img class='' src='https://grails.org/images/youtube.svg' alt='Youtube Icon' /></a>
                </li>
                <li>
                    <a href='https://www.linkedin.com/showcase/official-grails/'><img class='' src='https://grails.org/images/linkedin.svg' alt='LinkedIn Icon' /></a>
                </li>
                <li>
                    <a href='https://github.com/grails/'><img class='' src='https://grails.org/images/github.svg' alt='Github Icon' /></a>
                </li>
                <li style="margin-bottom:10px;">
                    <a href='https://twitter.com/grailsframework'><img class='' src='https://grails.org/images/twitter.svg' alt='Twitter Icon' /></a>
                </li>
            </ul>
        </nav>
        <nav class='partnersnav'><ul>

            <li>The Grails framework is Open Source
                <a href="https://www.apache.org/licenses/LICENSE-2.0.html">Apache 2 License</a>
            </li>

            <li>
                <a href='https://grails.org/privacy-policy.html'>Privacy Policy</a>
            </li>
            <li>
                <a href='https://grails.org/trademark-policy.html'>Trademark Policy & Brand Guidelines</a>
            </li>
        </ul></nav>
    </div>
</footer><div>
    <script type='text/javascript'>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-82213539-2', 'auto');
        ga('send', 'pageview');
    </script>
</div>
</body>
</html>
